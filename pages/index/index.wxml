<!--index.wxml-->
<wxs src="./index.wxs" module="tool" />
<view class="container">
	<scroll-view class="body {{tool.isPlaying(playingTrack) ? 'body-playing' : ''}}" scroll-y="{{true}}">
		<view class="header">
			<view>
				<text>本页面素材来自菲伯尔钢琴官网</text>
			</view>
			<view>
				https://pianoadventures.cn
			</view>
		</view>

		<view class="audio-list">
			<view
			 class="audio-item {{tool.isActive(index, playingTrack, epIndex) ? 'active' : ''}}"
			 wx:for="{{eps[epIndex].audios}}"
			 wx:key="index"
			 bindtap="handlePlay"
			 data-audio="{{item}}"
			 data-index="{{index}}"
			>
				<text class="song-index">{{index + 1}}</text>
				<text>{{item.title}}</text>
			</view>
		</view>
		<view class="footer" />
	</scroll-view>

	<view class="bottom-area">
		<view class='icon-wrapper iconMenu' hover-class="iconMenuHover" bindtap='toPickerShow'>
			<i class="icon icon-small" style="background-image: url({{icons.menu}})" />
		</view>
		<view>
			<view wx:if="{{tool.isPlaying(playingTrack)}}" class="audio-item active">
				<text class="song-index">{{playingTrack.index + 1}}</text>
				<text>{{playingTrack.title}}</text>
			</view>
		</view>
		<view class="play-area-content">
			<view
			 wx:if="{{audioStatus === 1 || audioStatus === 2}}"
			 class='icon-wrapper icon-wrapper-large'
			 hover-class="icon-hover"
			 bindtap="pause"
			>
				<i class="icon icon-large" style="background-image: url({{icons.pause}})" />
			</view>
			<view
			 wx:else
			 class='icon-wrapper icon-wrapper-large'
			 hover-class="icon-hover"
			 bindtap="play"
			>
				<i class="icon icon-large" style="background-image: url({{icons.play}})" />
			</view>
			<view hover-class="icon-hover-rotate" class='icon-wrapper icon-right' bindtap="refresh">
				<i class="icon" style="background-image: url({{icons.refresh}})" />
			</view>
		</view>
	</view>

	<mp-half-screen-dialog extClass='picker' show="{{pickerShow}}" closabled="{{false}}">
		<view slot='title' class="pickerTitle" catch:touchmove="catchTouchMove">
			<view class="flexBetween">
				<text class="cancelText" bindtap="toPickerHide" >取消</text>
				<text class='confirmText' bindtap="confirmPick" >确认</text>
			</view>
		</view>
		<picker-view
		 slot='desc'
		 value="{{[epIndex]}}"
		 indicator-style="height: 60px;"
		 style="width: 100%; height: 250px; z-index: 100"
		 bindchange="pickerChange"
		>
			<picker-view-column>
				<view wx:for="{{eps}}" wx:key="item" class='pickerRow'>
					<image style="width: 48px; height: 48px; margin-right: 12px" src="{{item.img}}" />
					<view>
						{{item.name}}
					</view>
				</view>
			</picker-view-column>
		</picker-view>
	</mp-half-screen-dialog>
</view>

